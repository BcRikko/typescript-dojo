ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹
====

ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã¨ã¯
----

> å…·ä½“çš„ãªãƒ‡ãƒ¼ã‚¿å‹ã«ç›´æ¥ä¾å­˜ã—ãªã„ã€æŠ½è±¡çš„ã‹ã¤æ±ç”¨çš„ãªã‚³ãƒ¼ãƒ‰è¨˜è¿°ã‚’å¯èƒ½ã«ã™ã‚‹ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ‰‹æ³•ã§ã‚ã‚‹ã€‚
> https://ja.wikipedia.org/wiki/ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°



é…åˆ—å‹ã‚‚å®Ÿã¯ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹
----

é…åˆ—ã®å‹ã¯`number[]`ã‚„`string[]`ä»¥å¤–ã«ã‚‚`Array<T>`ã‚’ä½¿ã£ã¦æŒ‡å®šã§ãã‚‹ã€‚

```ts
const num: Array<number> = [1, 2, 3]
const str: Array<string> = ['a', 'b', 'c']
```

### Array<T> ã®å‹å®šç¾©

```ts
// lib.es2015.iterable.d.ts
interface Array<T> {
  [Symbol.iterator](): IterableIterator<T>;
  entries(): IterableIterator<[number, T]>;
  keys(): IterableIterator<number>;
  values(): IterableIterator<T>;
}
```

ãŸã¨ãˆã°`Array<number>`ã¨æŒ‡å®šã—ãŸå ´åˆã¯ã€`Array<T>`ã®Tã®éƒ¨åˆ†ãŒã™ã¹ã¦numberã«å¤‰ã‚ã‚‹ã€‚

```ts
// T = number
const num: Array<number> = [1, 2, 3]

interface Array {
  // TãŒnumberã«æ›¸ãæ›ã‚ã‚‹
  [Symbol.iterator](): IterableIterator<number>;
  entries(): IterableIterator<[number, number]>;
  keys(): IterableIterator<number>;
  values(): IterableIterator<number>;
}
```

#### è±†çŸ¥è­˜ğŸ’¡

ä¾¿å®œä¸ŠTypeã®é ­æ–‡å­—ã§ã‚ã‚‹`T`ã‚’ä½¿ã£ã¦ã„ã‚‹ã ã‘ã§ã€åˆ¥ã®åå‰ã§ã‚‚OKã€‚


### ã‚‚ã†ã¡ã‚‡ã£ã¨ç°¡å˜ãªä¾‹

```ts
interface MyGenerics<FooType, BarType> {
  foo: FooType
  bar: BarType
}

// fooã¯numberå‹ã€barã¯stringå‹ã«ã—ãŸã„
const gen1: MyGenerics<number, string> = {
  foo: 123,
  bar: 'abc'
}

// fooã¯stringå‹ã€barã¯booleanå‹ã«ã—ãŸã„
const gen2: MyGenerics<string, boolean> = {
  foo: 'abc',
  bar: true
}
```


ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã®å‹ã¯è¤‡æ•°æŒ‡å®šã§ãã‚‹
----

Mapã‚’ä¾‹ã«å–ã‚‹ã€‚

```ts
// Key: number, Value: string
const map = new Map<number, string>()

map.set(123, 'abc')

map.set('abc', 123)
// Argument of type '"abc"' is not assignable to parameter of type 'number'.
```

```ts
// lib.es2015.iterable.d.ts
interface Map<K, V> {
  [Symbol.iterator](): IterableIterator<[K, V]>;
  entries(): IterableIterator<[K, V]>;
  keys(): IterableIterator<K>;
  values(): IterableIterator<V>;
}
```


ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã®å‹ã«åˆ¶é™ã‚’ã¤ã‘ã‚‹
----

### <T>ã«ã¯ã©ã‚“ãªå‹ã§ã‚‚æŒ‡å®šã§ãã¦ã—ã¾ã†

```ts
class MyClass<T> {
  private field: T
  constructor(param: T) {
    this.field = param
  }
}

// Tã¯ãªã‚“ã§ã‚‚æŒ‡å®šã§ãã¦ã—ã¾ã†
const myClass1 = new MyClass<number>(123)
const myClass2 = new MyClass<string>('abc')
const myClass3 = new MyClass<boolean>(true)
const myClass4 = new MyClass<null>(null)
const myClass5 = new MyClass<undefined>(undefined)
```

### <T>ã«æŒ‡å®šã§ãã‚‹å‹ã«åˆ¶é™ã‚’ã¤ã‘ã‚‹

`extends`ã‚’ä½¿ã†ã“ã¨ã§æŒ‡å®šã§ãã‚‹å‹ã«åˆ¶é™ã‚’ã¤ã‘ã‚‰ã‚Œã‚‹ã€‚

```ts
type FieldType = string | number

class MyClass<T extends FieldType> {
  private field: T
  constructor(param: T) {
    this.field = param
  }
}

// OK
const myClass1 = new MyClass<number>(123)
const myClass2 = new MyClass<string>('abc')

// NG
const myClass3 = new MyClass<boolean>(true)
// Type 'boolean' does not satisfy the constraint 'FieldType'.
```


### <T>ã®å‹æ¨è«–ã§å‹çœç•¥

TypeScriptã§ã¯å¼•æ•°ã‹ã‚‰å‹ã‚’åˆ¤å®šã—ã€ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã®å‹ã‚’æ¨è«–ã—ã¦ãã‚Œã‚‹ã€‚ãã®ãŸã‚å‹æŒ‡å®šã‚’çœç•¥ã§ãã‚‹ã€‚

```ts
type FieldType = string | number

class MyClass<T extends FieldType> {
  private field: T
  constructor(param: T) {
    this.field = param
  }
}

const str = new MyClass('abc')  // = new MyClass<string>('abc')
const str = new MyClass(123)  // = new MyClass<number>(123)
```


å®Ÿè·µçš„ãªä½¿ã„æ–¹
----

```ts
class BookBase {
  constructor(
    readonly title: string,
    readonly author: string
  ) { }

  toString(): string {
    return `${this.title} / ${this.author}`
  }
}

class PaperBack extends BookBase { private type = 1 }
class HardCover extends BookBase { private type = 2 }
class EBook extends BookBase { private type = 3 }

class BookShelf<BookType extends BookBase> {
  private list: BookType[] = []

  add(book: BookType): void {
    this.list.push(book)
  }

  listup(): string[] {
    return this.list.map(book => book.toString())
  }
}
```

```ts
const kindle = new BookShelf<EBook>()
kindle.add(new EBook('å¾è¼©ã¯çŒ«ã§ã‚ã‚‹', 'å¤ç›®æ¼±çŸ³'))

// kindle.add(new PaperBack('éŠ€æ²³é‰„é“ã®å¤œ', 'å®®æ²¢è³¢æ²»'))
// Argument of type 'PaperBack' is not assignable to parameter of type 'EBook'.

// kindle.add(new HardCover('äººé–“å¤±æ ¼', 'å¤ªå®°æ²»'))
// Argument of type 'HardCover' is not assignable to parameter of type 'EBook'.
```

```ts
const shelf = new BookShelf<PaperBack | HardCover>()

// shelf.add(new EBook('å¾è¼©ã¯çŒ«ã§ã‚ã‚‹', 'å¤ç›®æ¼±çŸ³'))
// Argument of type 'EBook' is not assignable to parameter of type 'PaperBack | HardCover'.

shelf.add(new PaperBack('éŠ€æ²³é‰„é“ã®å¤œ', 'å®®æ²¢è³¢æ²»'))
shelf.add(new HardCover('äººé–“å¤±æ ¼', 'å¤ªå®°æ²»'))
```


### è±†çŸ¥è­˜ğŸ’¡

#### constructorã®å¼•æ•°ã«ã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ã‚’ã¤ã‘ã‚‹ã¨ãƒ¡ãƒ³ãƒå¤‰æ•°ã«è‡ªå‹•çš„ã«ã‚»ãƒƒãƒˆã—ã¦ãã‚Œã‚‹


```ts
class MyClass {
  public pub: string
  private pri: string
  readonly r: string

  constructor(
    param: string,
    pub,
    pri,
    r
  ) {
    console.log(param)
    this.pub = pub
    this.pri = pri
    this.r = r
  }
}
```
â†‘â†“åŒã˜ã€‚
```ts
class MyClass {
  constructor(
    param: string,
    public pub: string,
    private pri: string,
    readonly r: string
  ) {}
}
```


#### interfaceã‚„objectã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å‹ã‚’å–å¾—ã™ã‚‹

ã‚ˆãã‚ã‚‹ã‚„ã¤ã€‚
```ts
interface Option {
  foo: string
  bar: number
}

class MyClass {
  // Optionã®å‹ãŒå¤‰ã‚ã£ãŸã¨ãã«æ‰‹å‹•ã§ä¿®æ­£ãŒå¿…è¦
  private foo: string
  private bar: number

  constructor(option: Option) {
    this.foo = option.foo
    this.bar = option.bar
  }
}
```

â†“
```ts
interface Option {
  foo: string
  bar: number
}

class MyClass {
  // interfaceã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å‹ã‚’ç›´æ¥å‚ç…§ã™ã‚‹
  private foo: Option['foo']
  private bar: Option['bar']

  constructor(option: Option) {
    this.foo = option.foo
    this.bar = option.bar
  }
}
```
